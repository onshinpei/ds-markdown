# å¤åˆ¶å’Œä¸‹è½½åŠŸèƒ½å®ç°è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

å·²æˆåŠŸä¸º ds-markdown é¡¹ç›®å®ç°äº†ä»£ç å—çš„å¤åˆ¶å’Œä¸‹è½½åŠŸèƒ½ã€‚å½“å¯ç”¨ `codeBlock.headerActions` å±æ€§æ—¶ï¼Œä»£ç å—ä¼šæ˜¾ç¤ºå¤åˆ¶å’Œä¸‹è½½æŒ‰é’®ã€‚

## åŠŸèƒ½æˆªå›¾

ç”¨æˆ·å¯ä»¥çœ‹åˆ°ç±»ä¼¼å›¾ç‰‡ä¸­çš„æ•ˆæœï¼š

- ğŸ“‹ å¤åˆ¶æŒ‰é’®ï¼šå°†ä»£ç å†…å®¹å¤åˆ¶åˆ°å‰ªè´´æ¿
- â¬‡ï¸ ä¸‹è½½æŒ‰é’®ï¼šå°†ä»£ç å†…å®¹ä¸‹è½½ä¸ºæ–‡ä»¶

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```tsx
import Markdown from 'ds-markdown';

function MyComponent() {
  const markdownContent = `
# ç¤ºä¾‹ä»£ç 

\`\`\`javascript
function greet(name) {
  console.log('Hello, ' + name + '!');
  return 'Hello, ' + name + '!';
}

greet('World');
\`\`\`
  `;

  return (
    <Markdown theme="light" codeBlock={{ headerActions: true }}>
      {markdownContent}
    </Markdown>
  );
}
```

### é…ç½®é€‰é¡¹

#### `codeBlock.headerActions`

- **ç±»å‹**: `boolean | React.ReactNode`
- **é»˜è®¤å€¼**: `false`
- **è¯´æ˜**:
  - å½“è®¾ç½®ä¸º `true` æ—¶ï¼Œæ˜¾ç¤ºé»˜è®¤çš„å¤åˆ¶å’Œä¸‹è½½æŒ‰é’®
  - å½“è®¾ç½®ä¸º `React.ReactNode` æ—¶ï¼Œæ˜¾ç¤ºè‡ªå®šä¹‰çš„å¤´éƒ¨æ“ä½œç»„ä»¶

#### ç¤ºä¾‹é…ç½®

```tsx
// å¯ç”¨é»˜è®¤æŒ‰é’®
<Markdown codeBlock={{ headerActions: true }}>
  {content}
</Markdown>

// è‡ªå®šä¹‰å¤´éƒ¨æ“ä½œ
<Markdown
  codeBlock={{
    headerActions: (
      <div>
        <button>è‡ªå®šä¹‰æŒ‰é’®1</button>
        <button>è‡ªå®šä¹‰æŒ‰é’®2</button>
      </div>
    )
  }}
>
  {content}
</Markdown>
```

## åŠŸèƒ½ç‰¹æ€§

### å¤åˆ¶åŠŸèƒ½

1. **ç°ä»£æµè§ˆå™¨æ”¯æŒ**: ä½¿ç”¨ `navigator.clipboard.writeText()` API
2. **é™çº§å…¼å®¹**: è‡ªåŠ¨é™çº§åˆ°ä¼ ç»Ÿçš„ `document.execCommand('copy')` æ–¹æ³•
3. **è§†è§‰åé¦ˆ**: ç‚¹å‡»åæŒ‰é’®æ–‡æœ¬å˜ä¸º"å·²å¤åˆ¶"ï¼Œ2ç§’åæ¢å¤
4. **é”™è¯¯å¤„ç†**: å¤åˆ¶å¤±è´¥æ—¶ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºé”™è¯¯ä¿¡æ¯

### ä¸‹è½½åŠŸèƒ½

1. **æ™ºèƒ½æ–‡ä»¶æ‰©å±•å**: æ ¹æ®ä»£ç è¯­è¨€è‡ªåŠ¨ç¡®å®šæ–‡ä»¶æ‰©å±•å
   - JavaScript â†’ `.js`
   - TypeScript â†’ `.ts`
   - Python â†’ `.py`
   - Java â†’ `.java`
   - C++ â†’ `.cpp`
   - CSS â†’ `.css`
   - HTML â†’ `.html`
   - JSON â†’ `.json`
   - ç­‰ç­‰...
2. **é»˜è®¤æ–‡ä»¶å**: `code.{extension}`
3. **UTF-8ç¼–ç **: ç¡®ä¿å¤šè¯­è¨€å­—ç¬¦æ­£ç¡®ä¿å­˜

### æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€

```
javascript, typescript, jsx, tsx, python, java, cpp, c, csharp, php, ruby, go, rust, swift, kotlin, scala, shell, bash, powershell, sql, html, css, scss, less, json, xml, yaml, markdown, dockerfile
```

## æ ·å¼ä¸»é¢˜

æŒ‰é’®æ ·å¼ä¼šè‡ªåŠ¨é€‚é…å½“å‰ä¸»é¢˜ï¼š

### äº®è‰²ä¸»é¢˜

- èƒŒæ™¯ï¼šåŠé€æ˜é»‘è‰²
- æ–‡å­—ï¼šæ·±ç°è‰²
- æ‚¬åœï¼šæ›´æ·±çš„èƒŒæ™¯è‰²

### æš—è‰²ä¸»é¢˜

- èƒŒæ™¯ï¼šåŠé€æ˜ç™½è‰²
- æ–‡å­—ï¼šæµ…ç°è‰²
- æ‚¬åœï¼šæ›´äº®çš„èƒŒæ™¯è‰²

## æŠ€æœ¯å®ç°

### æ–‡ä»¶ä¿®æ”¹

1. **`src/components/BlockWrap/index.tsx`**

   - æ·»åŠ å¤åˆ¶å’Œä¸‹è½½é€»è¾‘
   - å®ç°æŒ‰é’®ç»„ä»¶å’Œäº¤äº’
   - æ·»åŠ æ–‡ä»¶æ‰©å±•åæ˜ å°„

2. **`src/components/BlockWrap/index.less`**

   - æ·»åŠ æŒ‰é’®æ ·å¼
   - å®ç°ä¸»é¢˜é€‚é…
   - æ·»åŠ æ‚¬åœå’ŒåŠ¨ç”»æ•ˆæœ

3. **`src/components/HighReactMarkdown/index.tsx`**
   - ä¼ é€’ä»£ç å†…å®¹åˆ° `BlockWrap` ç»„ä»¶

### æ ¸å¿ƒä»£ç 

```tsx
// å¤åˆ¶åŠŸèƒ½
const handleCopy = async () => {
  if (!codeContent) return;

  try {
    await navigator.clipboard.writeText(codeContent);
    setCopyText('å·²å¤åˆ¶');
    setTimeout(() => setCopyText('å¤åˆ¶'), 2000);
  } catch (err) {
    // é™çº§æ–¹æ¡ˆ
    const textArea = document.createElement('textarea');
    textArea.value = codeContent;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
  }
};

// ä¸‹è½½åŠŸèƒ½
const handleDownload = () => {
  const blob = new Blob([codeContent], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = `code.${getFileExtension(language)}`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
};
```

## æµ‹è¯•

è®¿é—®å¼€å‘æœåŠ¡å™¨ (å¦‚ http://localhost:5173) å¹¶åœ¨ Markdown å†…å®¹ä¸­åŒ…å«ä»£ç å—ï¼š

```markdown
\`\`\`javascript
console.log('Hello World');
\`\`\`
```

ç¡®ä¿åœ¨ç»„ä»¶ä¸­å¯ç”¨äº† `codeBlock={{ headerActions: true }}`ã€‚

## æµè§ˆå™¨å…¼å®¹æ€§

- **å¤åˆ¶åŠŸèƒ½**: æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ŒIE9+ (é™çº§æ¨¡å¼)
- **ä¸‹è½½åŠŸèƒ½**: æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ŒIE10+
- **CSSæ ·å¼**: æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨

## æ³¨æ„äº‹é¡¹

1. å¤åˆ¶åŠŸèƒ½éœ€è¦ HTTPS ç¯å¢ƒæˆ– localhost æ‰èƒ½ä½¿ç”¨ç°ä»£ Clipboard API
2. ä¸‹è½½åŠŸèƒ½å¯èƒ½ä¼šè¢«æµè§ˆå™¨çš„ä¸‹è½½ç­–ç•¥é™åˆ¶
3. æŸäº›æµè§ˆå™¨å¯èƒ½ä¼šè¯¢é—®ç”¨æˆ·æ˜¯å¦å…è®¸ä¸‹è½½æ–‡ä»¶

## å®ŒæˆçŠ¶æ€

âœ… å¤åˆ¶åŠŸèƒ½å®ç°  
âœ… ä¸‹è½½åŠŸèƒ½å®ç°  
âœ… ä¸»é¢˜é€‚é…å®Œæˆ  
âœ… é”™è¯¯å¤„ç†å®Œæˆ  
âœ… æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†  
âœ… æ–‡ä»¶æ‰©å±•åæ™ºèƒ½è¯†åˆ«  
âœ… è§†è§‰åé¦ˆå®ç°
